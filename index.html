<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mamie IA</title>
<style>
body { font-family: Arial; text-align: center; background: #ffe4ec; padding: 40px; }
button { padding: 15px 25px; font-size: 18px; border-radius: 10px; border: none; background: #ff69b4; color: white; }
#response { margin-top: 30px; font-size: 20px; white-space: pre-line; }
</style>
</head>
<body>

<h1>ðŸ‘µ Mamie IA</h1>
<p>Appuie et parle Ã  Mamie</p>

<button onclick="startListening()">ðŸŽ¤ Parler</button>

<div id="response"></div>

<script>
let confusionLevel = 0;
function getResponse(userSpeech) {

userSpeech = userSpeech.toLowerCase();
confusionLevel++;

if(userSpeech.includes("bonjour"))
    return "Ah bonjour monsieur, c'est la sÃ©curitÃ© sociale ?";

if(userSpeech.includes("offre") || userSpeech.includes("promotion"))
    return "Une promotion ? Comme chez Carrefour en 1998 ?";

if(userSpeech.includes("argent") || userSpeech.includes("payer"))
    return "Attendez je vais chercher mon carnet de chÃ¨ques... il est oÃ¹ dÃ©jÃ ...";

if(userSpeech.includes("numÃ©ro") || userSpeech.includes("code"))
    return "Mon code ? C'est 1... 9... 4... ah non Ã§a c'est mon annÃ©e de naissance.";

if(userSpeech.includes("enregistrer"))
    return "Ah vous enregistrez ? Moi aussi j'enregistre pour la police.";

if(confusionLevel > 4)
    return "Attendez je vous passe mon petit-fils... il est gendarme.";

return [
    "Hein ? Parlez plus fort j'ai l'appareil qui grÃ©sille.",
    "Attendez je mets le haut-parleur.",
    "C'est vous le monsieur d'internet ?",
    "J'entends mal avec votre accent."
][Math.floor(Math.random() * 4)];

}


function speak(text) {
    const speech = new SpeechSynthesisUtterance(text);
    speech.lang = "fr-FR";
    speech.rate = 0.9;
    speech.pitch = 0.8;
    speech.volume = 1;
    speechSynthesis.speak(speech);
}


function startListening() {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "fr-FR";
    recognition.start();

    recognition.onresult = function(event) {
        const userSpeech = event.results[0][0].transcript;
        const randomResponse = getResponse(userSpeech);
       setTimeout(() => {
    document.getElementById("response").innerText =
    "Toi : " + userSpeech + "\nMamie : " + randomResponse;

    speak(randomResponse);
}, 2000);


    recognition.onerror = function() {
        alert("Mamie n'a pas entendu !");
    };
}
</script>

</body>
</html>
